<!DOCTYPE html>
<html>
  <head><script src="/docs/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=docs/livereload" data-no-instant defer></script><meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="generator" content="Hugo 0.136.4">
<meta name="viewport" content="width=device-width, initial-scale=1" /><meta name="description" content="для разработчиков встраиваемых систем" /><title>Описание протокола CAN и стека CANopen | Документация Платформы Цифриума</title>

<link
  rel="icon"
  href="/docs/images/favicon.png"
  type="image/x-icon"
/>
<link
    rel="stylesheet"
    rel="preload"
    type="text/css"
    href="/docs/css/main.css"
  /><link
      rel="stylesheet"
      type="text/css"
      href="/docs/css/external/fontawesome.all.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/docs/css/external/overlay-scrollbars/overlayscrollbars.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/docs/css/custom.min.css"
    />
</head>
  <body onload="browserCompatibility()"><div id="navbarInfo" class="is-hidden modal-container">
  <div class="modal-content-box modal-text-box">
    <div class="card modal-title is-radiusless">
      <div class="card-header">
        <p class="card-header-title is-marginless">О нас</p>
      </div>
    </div>
    <div class="modal-content-container">
      <div class="modal-content-block is-block">
</div>
    </div>
  </div>
</div>
<div id="navbarShortcuts" class="is-hidden modal-container">
  <div class="modal-content-box modal-text-box"><div class="card modal-title is-radiusless">
        <div class="card-header">
          <p class="card-header-title is-marginless">Горячии клавиши</p>
        </div>
      </div>
      <div class="modal-content-container">
        <div class="modal-content-block"><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>q</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Показать QR-код текущей страницы</p>
  </div><div class="modal-content"><kbd>Escape</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Закрыть модальные окна</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>i</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Показать информацию о веб-сайте</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>k</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Показать ярлыки</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>h</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Домой</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>f</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Найти на сайте</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>m</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Свернуть/развернуть боковую панель</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>t</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Свернуть/Развернуть оглавление</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>↑</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Перейти в начало страницы</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>↓</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Перейти в конец страницы</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>p</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Распечатать текущую страницу</p>
  </div></div>
      </div></div>
</div>
<div id="modalContainer" class="is-hidden modal-container">
  <div id="modal" class="modal-content-box"></div>
</div>
<nav id="navbar" class="navbar" role="navigation" aria-label="main navigation">
  <div id="navbarItemsContainer" class="navbar-brand"><div id="globalLogoContainer" class="is-flex">
  <a
    id="globalLogo"
    class="navbar-item navbar-item-standard is-paddingless"
    href="/docs/"
  >
    <img
      alt="Домашняя страница"
      src="/docs/images/logo.png"
    />
  </a>
  <a
    id="globalTouchLogo"
    class="navbar-item navbar-item-standard is-paddingless"
    href="/docs/"
  >
    <img
      alt="Домашняя страница"
      src="/docs/images/logoTouch.png"
    />
  </a>
</div>
<div id="navbarItems" class="is-flex">
      <div id="navbarItemsStart" class="is-flex">
        <div id="searchContainer" class="navbar-item"><div class="control has-icons-left">
  <span id="searchInput" class="autocomplete">
    <input
      id="search"
      autocomplete="off"
      class="input"
      type="search"
      placeholder="Поиск"
    />
  </span>
  <span class="icon is-left">
    <i class="fa-solid fa-magnifying-glass"></i>
  </span>
  <ul id="searchList" class="is-paddingless is-hidden"></ul>
</div>
</div>
      </div>
      <div id="navbarItemsEnd" class="is-flex is-invisible"><div class="navbar-item">
  <a
    id="printButton"
    class="button navbar-item-standard"
  >
    <span class="icon-text">Печать</span>
    <span class="icon">
      <i class="fa-solid fa-print fa-lg"></i>
    </span>
  </a>
</div>
<div class="navbar-item">
  <a
    id="qrCodeButton"
    class="button navbar-item-standard"
  >
    <span class="icon-text">QR код</span>
    <span class="icon">
      <i class="fa-solid fa-qrcode fa-lg"></i>
    </span>
  </a>
</div>
<div class="navbar-item">
  <a
    id="shortcutsInfo"
    trigger="navbarShortcuts"
    class="button navbar-item-standard navbar-trigger"
    title="Горячии клавиши"
  >
    <span class="icon-text">Горячие клавиши</span>
    <span class="icon">
      <i class="fa-solid fa-keyboard fa-lg"></i>
    </span>
  </a>
</div><div class="navbar-item is-enforced-hidden">
  <a
    id="siteInfo"
    trigger="navbarInfo"
    class="button navbar-item-standard navbar-trigger"
    title="О нас"
  >
    <span class="icon-text">О нас</span>
    <span class="icon">
      <i class="fa-solid fa-circle-question fa-lg"></i>
    </span>
  </a>
</div>
<div id="navbarExtend" class="navbar-item">
  <div id="navbarExtendWrapper">
    <a id="navbarExtendButton" class="button navbar-item-standard">
      <span class="icon">
        <i class="fa-solid fa-ellipsis fa-lg"></i>
      </span>
    </a>
    <div id="navbarExtendItemsContainer">
      <div id="navbarExtendItemsWrapper"><div class="navbar-item">
  <a
    id="printButtonExtend"
    class="button navbar-item-standard"
  >
    <span class="icon-text">Печать</span>
    <span class="icon">
      <i class="fa-solid fa-print fa-lg"></i>
    </span>
  </a>
</div>
<div class="navbar-item">
  <a
    id="qrCodeButtonExtend"
    class="button navbar-item-standard"
  >
    <span class="icon-text">QR код</span>
    <span class="icon">
      <i class="fa-solid fa-qrcode fa-lg"></i>
    </span>
  </a>
</div>
<div class="navbar-item">
  <a
    id="shortcutsInfoExtend"
    trigger="navbarShortcuts"
    class="button navbar-item-standard navbar-trigger"
    title="Горячии клавиши"
  >
    <span class="icon-text">Горячие клавиши</span>
    <span class="icon">
      <i class="fa-solid fa-keyboard fa-lg"></i>
    </span>
  </a>
</div><div class="navbar-item is-enforced-hidden">
  <a
    id="siteInfoExtend"
    trigger="navbarInfo"
    class="button navbar-item-standard navbar-trigger"
    title="О нас"
  >
    <span class="icon-text">О нас</span>
    <span class="icon">
      <i class="fa-solid fa-circle-question fa-lg"></i>
    </span>
  </a>
</div>
</div>
    </div>
  </div>
</div>
</div>
    </div>
  </div>
</nav>
<div id="navbarOverlay"></div>
<div
      class="columns is-mobile is-paddingless is-marginless"
      id="mainContainer"
    ><div
  id="sidebarContainer"
  class="column is-narrow is-paddingless is-marginless"
>
  <div id="sidebarWrapper" class="is-fixed">
    <div id="sidebar" class="is-marginless">
      <aside class="menu is-paddingless is-marginless">
        <ul class="menu-list is-marginless is-paddingless"><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/docs/introduction/'
        class='card-header-title'>
        <i class='fa-solid fa-database fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/introduction/'
        class='card-header-title'
          title='Структура'>
        <i class='fa-solid fa-database fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Структура</p></a></div>
          </div></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/docs/platform/'
        class='card-header-title'>
        <i class='fa-solid fa-shapes fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/platform/'
        class='card-header-title'
          title='Платформа'>
        <i class='fa-solid fa-shapes fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Платформа</p></a></div>
          </div></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/docs/admin_panel/'
        class='card-header-title'>
        <i class='fa-solid fa-user-gear fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/admin_panel/'
        class='card-header-title'
          title='Панель Администратора'>
        <i class='fa-solid fa-user-gear fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Панель Администратора</p></a></div>
          </div></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/docs/guides/'
        class='card-header-title'>
        <i class='fa-solid fa-shoe-prints fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/guides/'
        class='card-header-title'
          title='Пошаговые инструкции'>
        <i class='fa-solid fa-shoe-prints fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Пошаговые инструкции</p></a></div>
          </div></li>
      </div>
    </div><div class="card is-fs-expandable-icon is-sidebar-active"><div class="card-header">
      <a
        href='/docs/tech_docs/'
        class='card-header-title'>
        <i class='fa-solid fa-code-pull-request fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-tree-active is-entries-expandable is-entries-expanded"><div
            class="card"><div class="card-header">
      <a
        href='/docs/tech_docs/'
        class='card-header-title'
          title='Техническая документация'>
        <i class='fa-solid fa-code-pull-request fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Техническая документация</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-expanded">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless is-tree-active"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/tech_docs/pl_1/'
        class='card-header-title'
          title='Шаблоны для конфигурации backend сервисов с OPA'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Шаблоны для конфигурации backend сервисов с OPA</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card is-sidebar-active"id='sidebarActiveEntry'><div class="card-header is-single-link">
      <a
        href='/docs/tech_docs/pl_2/'
        class='card-header-title'
          title='Описание протокола CAN и стека CANopen'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Описание протокола CAN и стека CANopen</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header">
      <a
        href='/docs/questions/'
        class='card-header-title'>
        <i class='fa-solid fa-circle-question fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/docs/questions/'
        class='card-header-title'
          title='Частые вопросы'>
        <i class='fa-solid fa-circle-question fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Частые вопросы</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/questions/github/'
        class='card-header-title'
          title='GitHub'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">GitHub</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header">
      <a
        href='/docs/library/'
        class='card-header-title'>
        <i class='fa-solid fa-book fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/docs/library/'
        class='card-header-title'
          title='Библиотека'>
        <i class='fa-solid fa-book fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Библиотека</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/library/terms/'
        class='card-header-title'
          title='Термины и определения'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Термины и определения</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/docs/library/books/'
        class='card-header-title'
          title='Книги'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Книги</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/library/books/analitics/'
        class='card-header-title'
          title='Аналитика'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Аналитика</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/library/links/'
        class='card-header-title'
          title='Полезные ссылки'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Полезные ссылки</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div></ul>
      </aside>
    </div>
    <div id="sidebarCollapsible" class="is-marginless">
      <div class="card is-uncollapse-action">
        <div
          id="sidebarUncollapse"
          class="card-header is-single-link"
          title="Свернуть/развернуть боковую панель"
        >
          <a class="card-header-title">
            <i class="fa-solid fa-angles-right fa-lg"></i>
          </a>
        </div>
      </div>
      <div class="card is-collapse-action">
        <div
          id="sidebarCollapse"
          class="card-header is-single-link"
          title="Свернуть/развернуть боковую панель"
        >
          <a class="card-header-title">
            <i class="fa-solid fa-angles-left fa-lg"></i>
            <p>Убрать панель</p>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="sidebarMobileWrapper" class="column is-narrow is-hidden-desktop"></div>
<div class="columns is-mobile is-marginless is-scroll-smooth has-toc" id="contentContainer">
  <div class="column" id="content"><div id="contentTitle">Описание протокола CAN и стека CANopen</div>
<h1 id='введение'>Введение<a href='#%d0%b2%d0%b2%d0%b5%d0%b4%d0%b5%d0%bd%d0%b8%d0%b5' class='anchor'>#</a>
</h1><h2 id='назначение-документа'>Назначение документа<a href='#%d0%bd%d0%b0%d0%b7%d0%bd%d0%b0%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b4%d0%be%d0%ba%d1%83%d0%bc%d0%b5%d0%bd%d1%82%d0%b0' class='anchor'>#</a>
</h2><p>Документ предназначен для разработчиков Embedded-систем, впервые сталкивающихся с протоколом CAN и стеком CANopen.</p>
<p>Цель &ndash; сформировать целостное понимание архитектуры обмена, механизмов работы шины и прикладной модели устройств.</p>
<h2 id='область-применения'>Область применения<a href='#%d0%be%d0%b1%d0%bb%d0%b0%d1%81%d1%82%d1%8c-%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d1%8f' class='anchor'>#</a>
</h2><p>Материал ориентирован на разработку:</p>
<ul>
<li>микроконтроллерных устройств;</li>
<li>промышленных модулей ввода-вывода;</li>
<li>приводной техники;</li>
<li>распределённых систем управления.</li>
</ul>
<h1 id='протокол-can'>Протокол CAN<a href='#%d0%bf%d1%80%d0%be%d1%82%d0%be%d0%ba%d0%be%d0%bb-can' class='anchor'>#</a>
</h1><p>CAN (Controller Area Network) &ndash; промышленная последовательная шина, стандартизованная ISO (ISO 11898). Протокол обеспечивает обмен короткими сообщениями между узлами без центрального управляющего устройства.</p>
<h2 id='назначение-и-области-применения'>Назначение и области применения<a href='#%d0%bd%d0%b0%d0%b7%d0%bd%d0%b0%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b8-%d0%be%d0%b1%d0%bb%d0%b0%d1%81%d1%82%d0%b8-%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d1%8f' class='anchor'>#</a>
</h2><p>Основная задача CAN &ndash; надёжная передача данных в распределённых системах реального времени.</p>
<p>Ключевые свойства:</p>
<ul>
<li>отсутствие мастера;</li>
<li>детерминированный доступ к среде;</li>
<li>высокая помехоустойчивость;</li>
<li>встроенные механизмы обнаружения ошибок;</li>
<li>аппаратная поддержка в большинстве микроконтроллеров.</li>
</ul>
<p>CAN широко применяется в автомобильной электронике, промышленной автоматике, медицинском оборудовании и робототехнике.</p>
<h2 id='используемые-уровни-osi'>Используемые уровни OSI<a href='#%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d1%83%d0%b5%d0%bc%d1%8b%d0%b5-%d1%83%d1%80%d0%be%d0%b2%d0%bd%d0%b8-osi' class='anchor'>#</a>
</h2><p>CAN реализует только нижние уровни модели OSI.</p>
<p>Таблица 1 &ndash; Соответствие CAN уровням OSI</p>
<table>
    <tr>
        <th style="text-align: center; vertical-align: center;">Уровень OSI</th>
        <th style="text-align: center; vertical-align: center;">Реализация в CAN</th>
    </tr>
    <tr>
        <td>7–3</td>
        <td>Не определены стандартом</td>
    </tr>
    <tr>
        <td>2 (Data Link)</td>
        <td>Формирование кадра, арбитрация, контроль ошибок</td>
    </tr>
    <tr>
        <td>1 (Physical)</td>
        <td>Электрические параметры, дифференциальная линия CAN_H / CAN_L</td>
    </tr>
 </table> 
<p>Прикладной уровень в стандарт CAN не входит.</p>
<h2 id='структура-фрейма'>Структура фрейма<a href='#%d1%81%d1%82%d1%80%d1%83%d0%ba%d1%82%d1%83%d1%80%d0%b0-%d1%84%d1%80%d0%b5%d0%b9%d0%bc%d0%b0' class='anchor'>#</a>
</h2><p>В классическом CAN полезная нагрузка составляет до 8 байт. Поддерживаются стандартный (11-битный) и расширенный (29-битный) идентификаторы.</p>
<p>Упрощённая структура стандартного кадра:</p>
<pre tabindex="0"><code class="language-mermaid" data-lang="mermaid">flowchart LR
    SOF --&gt; Identifier --&gt; Control --&gt; Data --&gt; CRC --&gt; ACK --&gt; EOF
</code></pre><p>Таблица 2 &ndash; Основные поля CAN-кадра</p>
<table>
    <tr>
        <th style="text-align: center; vertical-align: center;">Поле</th>
        <th style="text-align: center; vertical-align: center;">Назначение</th>
    </tr>
    <tr>
        <td>SOF</td>
        <td>Признак начала кадра</td>
    </tr>
    <tr>
        <td>Identifier</td>
        <td>Приоритет и логическая идентификация сообщения</td>
    </tr>
    <tr>
        <td>Control</td>
        <td>Служебные биты и длина данных (DLC)</td>
    </tr>
    <tr>
        <td>Data</td>
        <td>Полезная нагрузка</td>
    </tr>
    <tr>
        <td>CRC</td>
        <td>Контроль целостности</td>
    </tr>
    <tr>
        <td>ACK</td>
        <td>Подтверждение приёма</td>
    </tr>
    <tr>
        <td>EOF</td>
        <td>Завершение кадра</td>
    </tr>
 </table> 
<p>Идентификатор определяет приоритет сообщения и участвует в механизме арбитрации.</p>
<h2 id='механизм-арбитрации'>Механизм арбитрации<a href='#%d0%bc%d0%b5%d1%85%d0%b0%d0%bd%d0%b8%d0%b7%d0%bc-%d0%b0%d1%80%d0%b1%d0%b8%d1%82%d1%80%d0%b0%d1%86%d0%b8%d0%b8' class='anchor'>#</a>
</h2><p>CAN использует побитовую арбитрацию без разрушения передачи.</p>
<p>Передача осуществляется с использованием доминантного (0) и рецессивного (1) уровней.
Если узел передаёт рецессивный бит, но фиксирует на линии доминантный, он прекращает передачу.</p>
<p>Выигрывает сообщение с меньшим числовым значением идентификатора.</p>
<p>Следствие для проектирования: схема идентификаторов должна разрабатываться на этапе архитектуры системы, поскольку она определяет приоритеты сообщений.</p>
<h2 id='обнаружение-и-обработка-ошибок'>Обнаружение и обработка ошибок<a href='#%d0%be%d0%b1%d0%bd%d0%b0%d1%80%d1%83%d0%b6%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b8-%d0%be%d0%b1%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%ba%d0%b0-%d0%be%d1%88%d0%b8%d0%b1%d0%be%d0%ba' class='anchor'>#</a>
</h2><p>CAN содержит встроенные механизмы контроля:</p>
<ul>
<li>проверка CRC;</li>
<li>контроль формата кадра;</li>
<li>подтверждение приёма (ACK);</li>
<li>контроль бит-стаффинга.</li>
</ul>
<p>Каждый узел ведёт счётчики ошибок передачи (TEC) и приёма (REC).</p>
<p>Таблица 3 — Состояния узла CAN</p>
<table>
    <tr>
        <th style="text-align: center; vertical-align: center;">Состояние</th>
        <th style="text-align: center; vertical-align: center;">Характеристика</th>
    </tr>
    <tr>
        <td>Error Active</td>
        <td>Нормальный режим работы</td>
    </tr>
    <tr>
        <td>Error Passive</td>
        <td>Повышенный уровень ошибок</td>
    </tr>
    <tr>
        <td>Bus Off</td>
        <td>отключён от шины</td>
    </tr>
 </table> 
<p>Состояние Bus Off предотвращает блокировку сети неисправным устройством.</p>
<h1 id='стек-canopen'>Стек CANopen<a href='#%d1%81%d1%82%d0%b5%d0%ba-canopen' class='anchor'>#</a>
</h1><p>CANopen &ndash; прикладной протокол поверх CAN, разработанный ассоциацией CAN in Automation (CiA).<br>
Он определяет структуру данных, поведение узлов и правила конфигурации.</p>
<h2 id='назначение-стека-canopen'>Назначение стека CANopen<a href='#%d0%bd%d0%b0%d0%b7%d0%bd%d0%b0%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d1%81%d1%82%d0%b5%d0%ba%d0%b0-canopen' class='anchor'>#</a>
</h2><p>CANopen обеспечивает:</p>
<ul>
<li>стандартизированную модель устройства;</li>
<li>управление состояниями узлов;</li>
<li>конфигурацию параметров;</li>
<li>передачу процессных данных;</li>
<li>унифицированные профили устройств.</li>
</ul>
<h2 id='используемые-уровни-osi-1'>Используемые уровни OSI<a href='#%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d1%83%d0%b5%d0%bc%d1%8b%d0%b5-%d1%83%d1%80%d0%be%d0%b2%d0%bd%d0%b8-osi-1' class='anchor'>#</a>
</h2><p>Таблица 4 &ndash; Соответствие CANopen уровням OSI</p>
<table>
    <tr>
        <th style="text-align: center; vertical-align: center;">Уровень OSI</th>
        <th style="text-align: center; vertical-align: center;">Реализация в CAN</th>
    </tr>
    <tr>
        <td>7 (Application)</td>
        <td>CANopen (SDO, PDO, NMT, EMCY)</td>
    </tr>
    <tr>
        <td>6–3</td>
        <td>Не используются</td>
    </tr>
    <tr>
        <td>2</td>
        <td>CAN</td>
    </tr>
    <tr>
        <td>1</td>
        <td>CAN</td>
    </tr>
 </table> 
<p>CANopen полностью занимает прикладной уровень.</p>
<h2 id='словарь-объектов'>Словарь объектов<a href='#%d1%81%d0%bb%d0%be%d0%b2%d0%b0%d1%80%d1%8c-%d0%be%d0%b1%d1%8a%d0%b5%d0%ba%d1%82%d0%be%d0%b2' class='anchor'>#</a>
</h2><p>Словарь объектов (Object Dictionary) &ndash; центральная структура данных CANopen-устройства.</p>
<p>Каждый параметр адресуется комбинацией:</p>
<ul>
<li>16-битный Index;</li>
<li>8-битный Subindex.</li>
</ul>
<p>Словарь включает:</p>
<ul>
<li>параметры идентификации;</li>
<li>коммуникационные настройки;</li>
<li>конфигурационные параметры;</li>
<li>процессные данные.</li>
</ul>
<p>Таблица 5 &ndash; Типовые диапазоны индексов</p>
<table>
    <tr>
        <th style="text-align: center; vertical-align: center;">Диапазон</th>
        <th style="text-align: center; vertical-align: center;">Назначение</th>
    </tr>
    <tr>
        <td>0x1000–0x1FFF</td>
        <td>Коммуникационные параметры</td>
    </tr>
    <tr>
        <td>0x2000–0x5FFF</td>
        <td>Параметры производителя</td>
    </tr>
    <tr>
        <td>0x6000 и выше</td>
        <td>Профили устройств</td>
 </table>
<p>Доступ к словарю осуществляется через SDO или автоматически через PDO.</p>
<h2 id='типы-объектов-коммуникации'>Типы объектов коммуникации<a href='#%d1%82%d0%b8%d0%bf%d1%8b-%d0%be%d0%b1%d1%8a%d0%b5%d0%ba%d1%82%d0%be%d0%b2-%d0%ba%d0%be%d0%bc%d0%bc%d1%83%d0%bd%d0%b8%d0%ba%d0%b0%d1%86%d0%b8%d0%b8' class='anchor'>#</a>
</h2><p>Таблица 6 &ndash; Основные типы объектов CANopen</p>
<table>
    <tr>
        <th style="text-align: center; vertical-align: center;">Тип</th>
        <th style="text-align: center; vertical-align: center;">Назначение</th>
    </tr>
    <tr>
        <td>NMT</td>
        <td>Управление состояниями сети</td>
    </tr>
    <tr>
        <td>SDO</td>
        <td>Чтение и запись объектов словаря</td>
    </tr>
    <tr>
        <td>PDO</td>
        <td>Передача процессных данных в реальном времени</td>
    </tr>
    <tr>
        <td>EMCY</td>
        <td>Передача аварийных сообщений</td>
    </tr>
 </table>
<p>PDO предназначены для быстрого обмена данными без подтверждения.
SDO используются для конфигурации и диагностики.</p>
<h2 id='адресация-узлов-node-id'>Адресация узлов (Node-ID)<a href='#%d0%b0%d0%b4%d1%80%d0%b5%d1%81%d0%b0%d1%86%d0%b8%d1%8f-%d1%83%d0%b7%d0%bb%d0%be%d0%b2-node-id' class='anchor'>#</a>
</h2><p>Каждому устройству присваивается Node-ID в диапазоне 1–127.
Значение 0 используется для широковещательных сообщений управления.</p>
<p>Идентификатор CAN формируется по принципу: <em>COB-ID = Function Code + Node-ID</em></p>
<p>Так реализуется логическая адресация поверх общей физической шины.</p>
<h1 id='глоссарий'>Глоссарий<a href='#%d0%b3%d0%bb%d0%be%d1%81%d1%81%d0%b0%d1%80%d0%b8%d0%b9' class='anchor'>#</a>
</h1><p><strong>CAN</strong> &ndash; протокол канального уровня для распределённых систем реального времени.</p>
<p><strong>CANopen</strong> &ndash; прикладной протокол поверх CAN.</p>
<p><strong>Node-ID</strong> &ndash; идентификатор узла в сети CANopen.</p>
<p><strong>COB-ID</strong> &ndash; идентификатор CAN-сообщения в CANopen.</p>
<p><strong>PDO</strong> &ndash; Process Data Object, объект передачи процессных данных.</p>
<p><strong>SDO</strong> &ndash; Service Data Object, сервис доступа к словарю объектов.</p>
<p><strong>NMT</strong> &ndash; Network Management, управление состояниями узлов.</p>
<p><strong>Object Dictionary</strong> &ndash; структурированная таблица параметров устройства.</p>
<p><strong>Bus Off</strong> &ndash; режим отключения узла при критическом уровне ошибок.</p>
<hr>

<style>
  #disqus_thread {
    max-width: 900px;
    margin: 40px auto;
    padding-top: 40px;
  }
</style>    

    <div id="disqus_thread"></div>
    <script>
      var disqus_config = function () {
        this.page.url = "http:\/\/localhost:1313\/docs\/tech_docs\/pl_2\/";
        this.page.identifier = "http:\/\/localhost:1313\/docs\/tech_docs\/pl_2\/";
      };
      (function() {
        var d = document, s = d.createElement('script');
        s.src = 'https://gosyuliya.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><div class="column is-sticky is-paddingless" id="tocWrapper">
  <div class="is-paddingless" id="tocContainer">
    <div class="toc-header">
      <h6 class="toc-title is-marginless">Содержание:</h6>
      <i
        title="Вернуться наверх"
        id="tocBackToTop"
        class="fa-solid fa-circle-arrow-up"
      ></i>
    </div>
    <div id="tocContent">
      <div id="toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#введение">Введение</a>
      <ul>
        <li><a href="#назначение-документа">Назначение документа</a></li>
        <li><a href="#область-применения">Область применения</a></li>
      </ul>
    </li>
    <li><a href="#протокол-can">Протокол CAN</a>
      <ul>
        <li><a href="#назначение-и-области-применения">Назначение и области применения</a></li>
        <li><a href="#используемые-уровни-osi">Используемые уровни OSI</a></li>
        <li><a href="#структура-фрейма">Структура фрейма</a></li>
        <li><a href="#механизм-арбитрации">Механизм арбитрации</a></li>
        <li><a href="#обнаружение-и-обработка-ошибок">Обнаружение и обработка ошибок</a></li>
      </ul>
    </li>
    <li><a href="#стек-canopen">Стек CANopen</a>
      <ul>
        <li><a href="#назначение-стека-canopen">Назначение стека CANopen</a></li>
        <li><a href="#используемые-уровни-osi-1">Используемые уровни OSI</a></li>
        <li><a href="#словарь-объектов">Словарь объектов</a></li>
        <li><a href="#типы-объектов-коммуникации">Типы объектов коммуникации</a></li>
        <li><a href="#адресация-узлов-node-id">Адресация узлов (Node-ID)</a></li>
      </ul>
    </li>
    <li><a href="#глоссарий">Глоссарий</a></li>
  </ul>
</nav></div>
      <div id="taxonomies"><div class="taxonomy-wrapper"></div><div class="taxonomy-wrapper"></div></div>
    </div>
  </div>
  <div
    class="is-paddingless"
    id="tocCollapsible"
    title="Свернуть/Развернуть оглавление"
  >
    <i class="fa-solid fa-angles-right fa-lg"></i>
  </div>
</div>
</div>
</div><script type='text/javascript'>
  const baseUrl = new URL('', 'http:\/\/localhost:1313\/docs\/').href;
  const codeCopyBefore = 'Скопировать в буфер обмена';
  const codeCopyAfter = 'Скопировано в буфер обмена';
  const svgDownloadLabel = 'Скачать в формате SVG';
  const helperLoadingLabel = 'Загрузка';
  const searchNoResults = 'Поиск не дал результатов';
  const introNextLabel = 'Следующий';
  const introPrevLabel = 'Предыдущий';
  const introSkipLabel = '✗';
  const introDoneLabel = 'Сделано';
  const printLabel = 'Распечатать текущую страницу';
  const qrCodeLabel = 'Показать QR-код текущей страницы';
  const naCommonLabel = 'Отсутствует';
  const jsoneditorValidateError = '';
</script>
<script
      type="module"
      src="/docs/js/theme/modules/const.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/modules/helpers.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/modules/helpersGlobal.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/init.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/navbar.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/print.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/qrcode.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/search.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/shortcuts.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/sidebar.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/toc.min.js"
    ></script><script
      type="module"
      src="/docs/js/fencedcodes/mermaid.min.js"
    ></script><script
      type="text/javascript"
      src="/docs/js/theme/browserCompatibility.min.js"
    ></script><script
      type="text/javascript"
      src="/docs/js/external/flexsearch/flexsearch.bundle.min.js"
    ></script><script
      type="text/javascript"
      src="/docs/js/external/qrious/qrious.min.js"
    ></script><script
      type="text/javascript"
      src="/docs/js/external/overlay-scrollbars/overlayscrollbars.min.js"
    ></script><script
      type="text/javascript"
      src="/docs/js/external/mermaid/mermaid.min.js"
    ></script>
</body>
</html>

<link rel="stylesheet" href="/docs/css/custom.css">



