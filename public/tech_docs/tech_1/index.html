<!DOCTYPE html>
<html>
  <head><meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="generator" content="Hugo 0.136.4">
<meta name="viewport" content="width=device-width, initial-scale=1" /><title>Шаблоны для конфигурации backend сервисов с OPA | Господарик Юлия</title>

<link
  rel="icon"
  href="/docs/images/favicon.png"
  type="image/x-icon"
/>
<link
    rel="stylesheet"
    rel="preload"
    type="text/css"
    href="/docs/css/main.css"
  /><link
      rel="stylesheet"
      type="text/css"
      href="/docs/css/external/fontawesome.all.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/docs/css/external/overlay-scrollbars/overlayscrollbars.min.css"
    />
</head>
  <body onload="browserCompatibility()"><div id="navbarInfo" class="is-hidden modal-container">
  <div class="modal-content-box modal-text-box">
    <div class="card modal-title is-radiusless">
      <div class="card-header">
        <p class="card-header-title is-marginless">О нас</p>
      </div>
    </div>
    <div class="modal-content-container">
      <div class="modal-content-block is-block">
</div>
    </div>
  </div>
</div>
<div id="navbarShortcuts" class="is-hidden modal-container">
  <div class="modal-content-box modal-text-box"><div class="card modal-title is-radiusless">
        <div class="card-header">
          <p class="card-header-title is-marginless">Горячии клавиши</p>
        </div>
      </div>
      <div class="modal-content-container">
        <div class="modal-content-block"><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>q</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Показать QR-код текущей страницы</p>
  </div><div class="modal-content"><kbd>Escape</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Закрыть модальные окна</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>i</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Показать информацию о веб-сайте</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>k</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Показать ярлыки</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>h</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Домой</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>f</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Найти на сайте</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>m</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Свернуть/развернуть боковую панель</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>t</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Свернуть/Развернуть оглавление</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>↑</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Перейти в начало страницы</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>↓</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Перейти в конец страницы</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>p</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Распечатать текущую страницу</p>
  </div></div>
      </div></div>
</div>
<div id="modalContainer" class="is-hidden modal-container">
  <div id="modal" class="modal-content-box"></div>
</div>
<nav id="navbar" class="navbar" role="navigation" aria-label="main navigation">
  <div id="navbarItemsContainer" class="navbar-brand"><div id="globalLogoContainer" class="is-flex">
  <a
    id="globalLogo"
    class="navbar-item navbar-item-standard is-paddingless"
    href="/docs/"
  >
    <img
      alt="Домашняя страница"
      src="/docs/images/logo.png"
    />
  </a>
  <a
    id="globalTouchLogo"
    class="navbar-item navbar-item-standard is-paddingless"
    href="/docs/"
  >
    <img
      alt="Домашняя страница"
      src="/docs/images/logoTouch.png"
    />
  </a>
</div>
<div id="navbarItems" class="is-flex">
      <div id="navbarItemsStart" class="is-flex">
        <div id="searchContainer" class="navbar-item"><div class="control has-icons-left">
  <span id="searchInput" class="autocomplete">
    <input
      id="search"
      autocomplete="off"
      class="input"
      type="search"
      placeholder="Поиск"
    />
  </span>
  <span class="icon is-left">
    <i class="fa-solid fa-magnifying-glass"></i>
  </span>
  <ul id="searchList" class="is-paddingless is-hidden"></ul>
</div>
</div>
      </div>
      <div id="navbarItemsEnd" class="is-flex is-invisible"><div class="navbar-item">
  <a
    id="printButton"
    class="button navbar-item-standard"
  >
    <span class="icon-text">Печать</span>
    <span class="icon">
      <i class="fa-solid fa-print fa-lg"></i>
    </span>
  </a>
</div>
<div class="navbar-item">
  <a
    id="qrCodeButton"
    class="button navbar-item-standard"
  >
    <span class="icon-text">QR код</span>
    <span class="icon">
      <i class="fa-solid fa-qrcode fa-lg"></i>
    </span>
  </a>
</div>
<div class="navbar-item">
  <a
    id="shortcutsInfo"
    trigger="navbarShortcuts"
    class="button navbar-item-standard navbar-trigger"
    title="Горячии клавиши"
  >
    <span class="icon-text">Горячие клавиши</span>
    <span class="icon">
      <i class="fa-solid fa-keyboard fa-lg"></i>
    </span>
  </a>
</div><div class="navbar-item is-enforced-hidden">
  <a
    id="siteInfo"
    trigger="navbarInfo"
    class="button navbar-item-standard navbar-trigger"
    title="О нас"
  >
    <span class="icon-text">О нас</span>
    <span class="icon">
      <i class="fa-solid fa-circle-question fa-lg"></i>
    </span>
  </a>
</div>
<div id="navbarExtend" class="navbar-item">
  <div id="navbarExtendWrapper">
    <a id="navbarExtendButton" class="button navbar-item-standard">
      <span class="icon">
        <i class="fa-solid fa-ellipsis fa-lg"></i>
      </span>
    </a>
    <div id="navbarExtendItemsContainer">
      <div id="navbarExtendItemsWrapper"><div class="navbar-item">
  <a
    id="printButtonExtend"
    class="button navbar-item-standard"
  >
    <span class="icon-text">Печать</span>
    <span class="icon">
      <i class="fa-solid fa-print fa-lg"></i>
    </span>
  </a>
</div>
<div class="navbar-item">
  <a
    id="qrCodeButtonExtend"
    class="button navbar-item-standard"
  >
    <span class="icon-text">QR код</span>
    <span class="icon">
      <i class="fa-solid fa-qrcode fa-lg"></i>
    </span>
  </a>
</div>
<div class="navbar-item">
  <a
    id="shortcutsInfoExtend"
    trigger="navbarShortcuts"
    class="button navbar-item-standard navbar-trigger"
    title="Горячии клавиши"
  >
    <span class="icon-text">Горячие клавиши</span>
    <span class="icon">
      <i class="fa-solid fa-keyboard fa-lg"></i>
    </span>
  </a>
</div><div class="navbar-item is-enforced-hidden">
  <a
    id="siteInfoExtend"
    trigger="navbarInfo"
    class="button navbar-item-standard navbar-trigger"
    title="О нас"
  >
    <span class="icon-text">О нас</span>
    <span class="icon">
      <i class="fa-solid fa-circle-question fa-lg"></i>
    </span>
  </a>
</div>
</div>
    </div>
  </div>
</div>
</div>
    </div>
  </div>
</nav>
<div id="navbarOverlay"></div>
<div
      class="columns is-mobile is-paddingless is-marginless"
      id="mainContainer"
    ><div
  id="sidebarContainer"
  class="column is-narrow is-paddingless is-marginless"
>
  <div id="sidebarWrapper" class="is-fixed">
    <div id="sidebar" class="is-marginless">
      <aside class="menu is-paddingless is-marginless">
        <ul class="menu-list is-marginless is-paddingless"><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/docs/introduction/'
        class='card-header-title'>
        <i class='fa-solid fa-database fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/introduction/'
        class='card-header-title'
          title='Структура'>
        <i class='fa-solid fa-database fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Структура</p></a></div>
          </div></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/docs/platform/'
        class='card-header-title'>
        <i class='fa-solid fa-shapes fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/platform/'
        class='card-header-title'
          title='Платформа'>
        <i class='fa-solid fa-shapes fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Платформа</p></a></div>
          </div></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/docs/admin_panel/'
        class='card-header-title'>
        <i class='fa-solid fa-user-gear fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/admin_panel/'
        class='card-header-title'
          title='Панель Администратора'>
        <i class='fa-solid fa-user-gear fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Панель Администратора</p></a></div>
          </div></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/docs/guides/'
        class='card-header-title'>
        <i class='fa-solid fa-shoe-prints fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/guides/'
        class='card-header-title'
          title='Пошаговые инструкции'>
        <i class='fa-solid fa-shoe-prints fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Пошаговые инструкции</p></a></div>
          </div></li>
      </div>
    </div><div class="card is-fs-expandable-icon is-sidebar-active"><div class="card-header">
      <a
        href='/docs/tech_docs/'
        class='card-header-title'>
        <i class='fa-solid fa-code-pull-request fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-tree-active is-entries-expandable is-entries-expanded"><div
            class="card"><div class="card-header">
      <a
        href='/docs/tech_docs/'
        class='card-header-title'
          title='Техническая документация'>
        <i class='fa-solid fa-code-pull-request fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Техническая документация</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-expanded">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless is-tree-active"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card is-sidebar-active"id='sidebarActiveEntry'><div class="card-header is-single-link">
      <a
        href='/docs/tech_docs/tech_1/'
        class='card-header-title'
          title='Шаблоны для конфигурации backend сервисов с OPA'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Шаблоны для конфигурации backend сервисов с OPA</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/tech_docs/tech_2/'
        class='card-header-title'
          title='CAN и CANopen: краткое инженерное введение для Embedded-разработчика'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">CAN и CANopen: краткое инженерное введение для Embedded-разработчика</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header">
      <a
        href='/docs/questions/'
        class='card-header-title'>
        <i class='fa-solid fa-circle-question fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/docs/questions/'
        class='card-header-title'
          title='Частые вопросы'>
        <i class='fa-solid fa-circle-question fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Частые вопросы</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/questions/github/'
        class='card-header-title'
          title='GitHub'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">GitHub</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header">
      <a
        href='/docs/library/'
        class='card-header-title'>
        <i class='fa-solid fa-book fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/docs/library/'
        class='card-header-title'
          title='Библиотека'>
        <i class='fa-solid fa-book fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Библиотека</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/library/terms/'
        class='card-header-title'
          title='Термины и определения'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Термины и определения</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/docs/library/books/'
        class='card-header-title'
          title='Книги'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Книги</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/library/books/analitics/'
        class='card-header-title'
          title='Аналитика'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Аналитика</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/docs/library/links/'
        class='card-header-title'
          title='Полезные ссылки'>
        <i class='fa-solid fa-turn-up fa-rotate-90 fa-xs'></i><p class="pt-0 pb-0 pr-2 pl-0">Полезные ссылки</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div></ul>
      </aside>
    </div>
    <div id="sidebarCollapsible" class="is-marginless">
      <div class="card is-uncollapse-action">
        <div
          id="sidebarUncollapse"
          class="card-header is-single-link"
          title="Свернуть/развернуть боковую панель"
        >
          <a class="card-header-title">
            <i class="fa-solid fa-angles-right fa-lg"></i>
          </a>
        </div>
      </div>
      <div class="card is-collapse-action">
        <div
          id="sidebarCollapse"
          class="card-header is-single-link"
          title="Свернуть/развернуть боковую панель"
        >
          <a class="card-header-title">
            <i class="fa-solid fa-angles-left fa-lg"></i>
            <p>Убрать панель</p>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="sidebarMobileWrapper" class="column is-narrow is-hidden-desktop"></div>
<div class="columns is-mobile is-marginless is-scroll-smooth has-toc" id="contentContainer">
  <div class="column" id="content"><div id="contentTitle">Шаблоны для конфигурации backend сервисов с OPA</div>
<h1 id='helm-chart-c-шаблонами-для-acr-pdp-sidecar'>HELM chart c шаблонами для ACR PDP sidecar<a href='#helm-chart-c-%d1%88%d0%b0%d0%b1%d0%bb%d0%be%d0%bd%d0%b0%d0%bc%d0%b8-%d0%b4%d0%bb%d1%8f-acr-pdp-sidecar' class='anchor'>#</a>
</h1><p><em>Этот Helm Chart содержит шаблоны для конфигурации backend-сервисов с Open Policy Agent (OPA), работающим как sidecar для Policy Decision Point (PDP).</em></p>
<h2 id='настройка-зависимости-helm-chart'>Настройка зависимости HELM-CHART<a href='#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-%d0%b7%d0%b0%d0%b2%d0%b8%d1%81%d0%b8%d0%bc%d0%be%d1%81%d1%82%d0%b8-helm-chart' class='anchor'>#</a>
</h2><p>Для подключения зависимости добавьте в <code>Chart.yaml</code> следующую конфигурацию:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">dependencies</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">acr-pdp</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">version</span>: <span style="color:#ae81ff">^1.0.0-0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">repository</span>: <span style="color:#e6db74">&#34;@dbp&#34;</span>
</span></span></code></pre></div><h2 id='содержимое-valuesyaml'>Содержимое <code>values.yaml</code><a href='#%d1%81%d0%be%d0%b4%d0%b5%d1%80%d0%b6%d0%b8%d0%bc%d0%be%d0%b5-valuesyaml' class='anchor'>#</a>
</h2><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">pdpSidecar</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">policiesFilePath</span>: <span style="color:#e6db74">&#34;files/policies/**&#34;</span>
</span></span></code></pre></div><ul>
<li><strong>policiesFilePath</strong> — указывает путь к файлам политик для OPA (чаще всего файлы форматов <code>.rego</code> или <code>.json</code>).</li>
</ul>
<p>Все остальные параметры можно переопределить по мере необходимости: порт сервиса, параметры контейнера Docker, таймауты и другие настройки.</p>
<h2 id='конфигурация-configmap'>Конфигурация ConfigMap<a href='#%d0%ba%d0%be%d0%bd%d1%84%d0%b8%d0%b3%d1%83%d1%80%d0%b0%d1%86%d0%b8%d1%8f-configmap' class='anchor'>#</a>
</h2><p>Для хранения политик OPA создайте отдельный шаблон <strong>ConfigMap</strong>.
Включите следующий код в шаблон ConfigMap:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>{{- <span style="color:#ae81ff">include &#34;acr-pdp.configmap&#34; . -}}</span>
</span></span></code></pre></div><p>Этот шаблон будет автоматически генерировать ConfigMap с содержимым из файлов политик OPA, расположенных по указанному пути.</p>
<h2 id='конфигурация-портов-сервиса'>Конфигурация портов сервиса<a href='#%d0%ba%d0%be%d0%bd%d1%84%d0%b8%d0%b3%d1%83%d1%80%d0%b0%d1%86%d0%b8%d1%8f-%d0%bf%d0%be%d1%80%d1%82%d0%be%d0%b2-%d1%81%d0%b5%d1%80%d0%b2%d0%b8%d1%81%d0%b0' class='anchor'>#</a>
</h2><p>Для объявления порта, используемого контейнером PDP, добавьте следующий код в шаблон сервиса в раздел с массивом портов (<code>ports</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>{{- <span style="color:#ae81ff">include &#34;acr-pdp.sidecar.port&#34; . | nindent 4}}</span>
</span></span></code></pre></div><h2 id='конфигурация-контейнеров'>Конфигурация контейнеров<a href='#%d0%ba%d0%be%d0%bd%d1%84%d0%b8%d0%b3%d1%83%d1%80%d0%b0%d1%86%d0%b8%d1%8f-%d0%ba%d0%be%d0%bd%d1%82%d0%b5%d0%b9%d0%bd%d0%b5%d1%80%d0%be%d0%b2' class='anchor'>#</a>
</h2><h3 id='добавление-аннотаций'>Добавление аннотаций`<a href='#%d0%b4%d0%be%d0%b1%d0%b0%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b0%d0%bd%d0%bd%d0%be%d1%82%d0%b0%d1%86%d0%b8%d0%b9' class='anchor'>#</a>
</h3><p>В секции <code>metadata</code> шаблона будущих Pod (например, в шаблоне Deployment или StatefulSet) добавьте аннотации с помощью <code>acr-pdp.sidecar.label-logging</code> следующим образом:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">template</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">annotations</span>:
</span></span><span style="display:flex;"><span>              {{- <span style="color:#ae81ff">include &#34;acr-pdp.sidecar.label-logging&#34; . | nindent 8 }}</span>
</span></span></code></pre></div><h3 id='включение-контейнера-pdp'>Включение контейнера PDP<a href='#%d0%b2%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%ba%d0%be%d0%bd%d1%82%d0%b5%d0%b9%d0%bd%d0%b5%d1%80%d0%b0-pdp' class='anchor'>#</a>
</h3><p>В раздел <code>containers</code> (внутри <code>spec.template.spec.containers</code> в шаблоне Pod) добавьте следующий код, чтобы включить sidecar-контейнер с OPA:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>{{- <span style="color:#ae81ff">acr-pdp.sidecar.container&#34; . | nindent 8 }}</span>
</span></span></code></pre></div><p>Этот код добавит контейнер с конфигурацией PDP в качестве sidecar, используя параметры, заданные в <code>values.yaml</code>.</p>
<hr>
<h1 id='таблица-markdown'>Таблица Markdown<a href='#%d1%82%d0%b0%d0%b1%d0%bb%d0%b8%d1%86%d0%b0-markdown' class='anchor'>#</a>
</h1><table>
  <thead>
      <tr>
          <th>Наименование</th>
          <th></th>
          <th>Фактическое значение</th>
          <th></th>
          <th>Плановое значение</th>
          <th></th>
          <th>Итоговое значение</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td></td>
          <td></td>
          <td>А</td>
          <td>В</td>
          <td>А</td>
          <td>В</td>
          <td></td>
      </tr>
      <tr>
          <td>Позиция 1</td>
          <td></td>
          <td>5</td>
          <td>5</td>
          <td>10</td>
          <td>5</td>
          <td>25</td>
      </tr>
      <tr>
          <td>NOTE</td>
          <td>Важное примечание</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>Позиция 2 </td>
          <td></td>
          <td>5</td>
          <td>5</td>
          <td>10</td>
          <td>5</td>
          <td>25</td>
      </tr>
      <tr>
          <td>Позиция 3</td>
          <td></td>
          <td>0</td>
          <td>5</td>
          <td>10</td>
          <td>5</td>
          <td>20</td>
      </tr>
      <tr>
          <td>Итого:</td>
          <td></td>
          <td>25</td>
          <td></td>
          <td>45</td>
          <td></td>
          <td>70</td>
      </tr>
  </tbody>
</table>
<hr>
<h1 id='таблица-html'>Таблица HTML<a href='#%d1%82%d0%b0%d0%b1%d0%bb%d0%b8%d1%86%d0%b0-html' class='anchor'>#</a>
</h1><table>
    <tr>
        <th rowspan="2" colspan="2" style="text-align: center; vertical-align: center;">Наименование</th>
        <th colspan="2" style="text-align: center; vertical-align: center;">Фактическое значение</th>
        <th colspan="2" style="text-align: center; vertical-align: center;">Плановое значение</th>
        <th rowspan="2" style="text-align: center; vertical-align: center;">Итоговое значение</th>
    </tr>
    <tr>
        <th style="text-align: center; vertical-align: center;">А</th>
        <th style="text-align: center; vertical-align: center;">В</th>
        <th style="text-align: center; vertical-align: center;">А</th>
        <th style="text-align: center; vertical-align: center;">В</th>
    </tr>
    <tr>
        <td colspan="2">Позиция 1 </td>
        <td rowspan="2">5</td>
        <td rowspan="2">5</td>
        <td rowspan="2">10</td>
        <td rowspan="2">5</td>
        <td rowspan="2">25</td>
    </tr>
    <tr>
        <td>NOTE</td>
        <td>Важное примечание</td>
    </tr>
    <tr>
        <td colspan="2">Позиция 2</td>
        <td>5</td>
        <td>5</td>
        <td>10</td>
        <td>5</td>
        <td>25</td>
    </tr>
    <tr>
        <td colspan="2">Позиция 3</td>
        <td>5</td>
        <td>5</td>
        <td>10</td>
        <td>5</td>
        <td>25</td>
    </tr>
    <tr>
        <td colspan="2">Итого:</td>
        <td colspan="2">5</td>
        <td colspan="2">5</td>
        <td>25</td>
    </tr>
</table>
<hr>

<style>
  #disqus_thread {
    max-width: 900px;
    margin: 40px auto;
    padding-top: 40px;
  }
</style>    

    <div id="disqus_thread"></div>
    <script>
      var disqus_config = function () {
        this.page.url = "https:\/\/gosyuliya.github.io\/docs\/tech_docs\/tech_1\/";
        this.page.identifier = "https:\/\/gosyuliya.github.io\/docs\/tech_docs\/tech_1\/";
      };
      (function() {
        var d = document, s = d.createElement('script');
        s.src = 'https://gosyuliya.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><div class="column is-sticky is-paddingless" id="tocWrapper">
  <div class="is-paddingless" id="tocContainer">
    <div class="toc-header">
      <h6 class="toc-title is-marginless">Содержание:</h6>
      <i
        title="Вернуться наверх"
        id="tocBackToTop"
        class="fa-solid fa-circle-arrow-up"
      ></i>
    </div>
    <div id="tocContent">
      <div id="toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#helm-chart-c-шаблонами-для-acr-pdp-sidecar">HELM chart c шаблонами для ACR PDP sidecar</a>
      <ul>
        <li><a href="#настройка-зависимости-helm-chart">Настройка зависимости HELM-CHART</a></li>
        <li><a href="#содержимое-valuesyaml">Содержимое <code>values.yaml</code></a></li>
        <li><a href="#конфигурация-configmap">Конфигурация ConfigMap</a></li>
        <li><a href="#конфигурация-портов-сервиса">Конфигурация портов сервиса</a></li>
        <li><a href="#конфигурация-контейнеров">Конфигурация контейнеров</a>
          <ul>
            <li><a href="#добавление-аннотаций">Добавление аннотаций`</a></li>
            <li><a href="#включение-контейнера-pdp">Включение контейнера PDP</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#таблица-markdown">Таблица Markdown</a></li>
    <li><a href="#таблица-html">Таблица HTML</a></li>
  </ul>
</nav></div>
      <div id="taxonomies"><div class="taxonomy-wrapper"></div><div class="taxonomy-wrapper"></div></div>
    </div>
  </div>
  <div
    class="is-paddingless"
    id="tocCollapsible"
    title="Свернуть/Развернуть оглавление"
  >
    <i class="fa-solid fa-angles-right fa-lg"></i>
  </div>
</div>
</div>
</div><script type='text/javascript'>
  const baseUrl = new URL('', 'https:\/\/gosyuliya.github.io\/docs\/').href;
  const codeCopyBefore = 'Скопировать в буфер обмена';
  const codeCopyAfter = 'Скопировано в буфер обмена';
  const svgDownloadLabel = 'Скачать в формате SVG';
  const helperLoadingLabel = 'Загрузка';
  const searchNoResults = 'Поиск не дал результатов';
  const introNextLabel = 'Следующий';
  const introPrevLabel = 'Предыдущий';
  const introSkipLabel = '✗';
  const introDoneLabel = 'Сделано';
  const printLabel = 'Распечатать текущую страницу';
  const qrCodeLabel = 'Показать QR-код текущей страницы';
  const naCommonLabel = 'Отсутствует';
  const jsoneditorValidateError = '';
</script>
<script
      type="module"
      src="/docs/js/theme/modules/const.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/modules/helpers.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/modules/helpersGlobal.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/init.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/navbar.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/print.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/qrcode.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/search.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/shortcuts.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/sidebar.min.js"
    ></script><script
      type="module"
      src="/docs/js/theme/toc.min.js"
    ></script><script
      type="text/javascript"
      src="/docs/js/theme/browserCompatibility.min.js"
    ></script><script
      type="text/javascript"
      src="/docs/js/external/flexsearch/flexsearch.bundle.min.js"
    ></script><script
      type="text/javascript"
      src="/docs/js/external/qrious/qrious.min.js"
    ></script><script
      type="text/javascript"
      src="/docs/js/external/overlay-scrollbars/overlayscrollbars.min.js"
    ></script>
</body>
</html>

<link rel="stylesheet" href="/docs/css/custom.css">



